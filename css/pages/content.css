/**
 * CONTENT PAGE STYLES
 * Shared styles for all content pages (non-homepage)
 * Handles layout overrides, tables, images, lists, deprecated elements, and content links
 */

/* ===== CRITICAL LAYOUT OVERRIDES =====
 * homepage.css sets .intro-section .container to max-width:900px + text-align:center
 * Content pages need wider containers and left-aligned text
 */
.intro-section .container.content-page {
    max-width: 1200px;
    text-align: left;
    animation: none;
}

/* Remove the decorative yellow bar from content pages */
.intro-section:has(.content-page)::before {
    display: none;
}

/* Fallback for browsers without :has() — hide on all intro-sections that contain .content-page */
/* Applied via a small JS snippet or just accept the bar on older browsers */

/* ===== CONTENT PAGE WRAPPER ===== */
.content-page {
    font-size: clamp(0.9375rem, 1vw + 0.75rem, 1.0625rem);
    line-height: 1.75;
    color: var(--hp-text, #2a2a2a);
    padding-top: 2.5rem;
    padding-bottom: 3rem;
}

/* Match the navbar's 1200px max-width with comfortable side padding */
.content-page .container {
    max-width: 1200px;
    padding-left: 2rem;
    padding-right: 2rem;
}

.content-page h1 {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 3.5vw, 2.25rem);
    font-weight: 600;
    color: var(--hp-black);
    line-height: var(--line-height-heading);
    letter-spacing: -0.02em;
    margin-bottom: 1.5rem;
    text-align: center;
}

/* Links inside page title */
.content-page h1 a {
    text-decoration: underline;
    color: var(--hp-black, #0a0a0a);
    border-bottom: none;
    padding-bottom: 0;
    transition: color 0.2s ease;
}

.content-page h1 a:hover {
    color: var(--color-accent-dark, #b8922a);
    border-bottom: none;
}

.content-page h2 {
    font-family: var(--font-display);
    font-size: clamp(1.25rem, 2.5vw, 1.75rem);
    font-weight: 600;
    color: var(--hp-black);
    line-height: var(--line-height-heading);
    margin-bottom: 0.75rem;
    margin-top: 1.5rem;
    padding-bottom: 0;
    border-bottom: none;
}

.content-page h3 {
    font-family: var(--font-display);
    font-size: clamp(1.1rem, 2vw, 1.375rem);
    font-weight: 600;
    color: var(--hp-black);
    margin-bottom: 1rem;
    margin-top: 2rem;
}

.content-page h4 {
    font-family: var(--font-display);
    font-size: clamp(1rem, 1.5vw, 1.1875rem);
    font-weight: 600;
    color: var(--hp-black);
    margin-bottom: 0.75rem;
    margin-top: 1.5rem;
}

/* ===== TABLES ===== */
.content-page table {
    border-collapse: collapse;
    margin-bottom: 1.5rem;
    font-size: 0.9375rem;
    line-height: 1.6;
    width: auto; /* Reset base.css width:100% — respect legacy width attributes */
}

/* Only force full-width on bordered data tables */
.content-page table[border="1"],
.content-page table.bordered {
    width: 100%;
    border: 1px solid var(--hp-gray, #e5e4e1);
}

.content-page table[border="1"] td,
.content-page table[border="1"] th,
.content-page table.bordered td,
.content-page table.bordered th {
    border: 1px solid var(--hp-gray, #e5e4e1);
    padding: 0.625rem 0.75rem;
    vertical-align: top;
}

.content-page th {
    background: var(--hp-warm-white, #f7f6f3);
    font-weight: 600;
    color: var(--hp-black, #0a0a0a);
    text-align: left;
}

.content-page td {
    vertical-align: top;
}

/* Only add hover on bordered/data tables, not layout tables */
.content-page table[border="1"] tr:hover,
.content-page table.bordered tr:hover {
    background: var(--hp-gray-light, #f0efec);
}

/* Technical details table — label column styling */
.content-page table[border="1"] td:first-child {
    font-weight: 500;
    color: var(--hp-black, #0a0a0a);
    white-space: nowrap;
    background: var(--color-background-alt, #f5f5f5);
    width: 35%;
}

/* Alternating rows for bordered tables */
.content-page table[border="1"] tr:nth-child(even),
.content-page table.bordered tr:nth-child(even) {
    background: var(--color-off-white, #fdfcfb);
}

/* Boost readability — <small> inside bordered tables shouldn't shrink as much */
.content-page table[border="1"] small {
    font-size: 0.9375em;
    color: var(--color-text-primary, #1c1917);
}

.content-page table[border="1"] td:first-child small {
    font-weight: 500;
}

/* ===== IMAGES ===== */
.content-page img {
    max-width: 100%;
    height: auto;
    border-radius: 0;
    display: inline;  /* Override base.css display:block — many legacy images are inline */
}

/* Legacy float attributes support */
.content-page img[align="right"] {
    float: right;
    margin: 0.5rem 0 1rem 1.5rem;
    max-width: 50%;
    display: block;
}

.content-page img[align="left"] {
    float: left;
    margin: 0.5rem 1.5rem 1rem 0;
    max-width: 50%;
    display: block;
}

.content-page img[align="center"] {
    display: block;
    margin: 1rem auto;
}

/* Table-aligned images (legacy pattern: right-aligned table with image)
   Use min-content so the table shrinks to match image width and
   caption text wraps — preserving original float/wrap behavior */
.content-page table[align="right"] {
    float: right;
    margin: 0.5rem 0 1rem 1.5rem;
    width: min-content;
}

.content-page table[align="left"] {
    float: left;
    margin: 0.5rem 1.5rem 1rem 0;
    width: min-content;
}

.content-page table[align="center"] {
    margin-left: auto;
    margin-right: auto;
    width: auto;
}

/* Reset base.css td borders/padding for floating image/caption tables */
.content-page table[align="right"] td,
.content-page table[align="left"] td {
    border-bottom: none;
    padding: 0;
}

/* Images inside floated tables must keep their HTML width attribute size.
   Without this, base.css max-width:100% lets images shrink during
   min-content calculation, collapsing the table to near-zero width. */
.content-page table[align="right"] img,
.content-page table[align="left"] img {
    max-width: none;
}

/* ===== LISTS ===== */
.content-page ul,
.content-page ol {
    margin-bottom: 1.25rem;
    padding-left: 1.75rem;
}

.content-page li {
    margin-bottom: 0.5rem;
    line-height: 1.65;
}

.content-page li ul,
.content-page li ol {
    margin-bottom: 0.5rem;
    margin-top: 0.25rem;
}

/* ===== PARAGRAPHS ===== */
.content-page p {
    margin-bottom: 1rem;
    line-height: 1.75;
}

/* ===== CONTENT LINKS ===== */
.content-page a {
    color: var(--color-text-primary, #1c1917);
    text-decoration: underline;
    text-decoration-color: rgba(0, 0, 0, 0.25);
    text-underline-offset: 2px;
    transition: color 0.2s ease, text-decoration-color 0.2s ease;
}

.content-page a:hover {
    color: var(--color-accent-dark, #d4a72c);
    text-decoration-color: var(--color-accent-dark, #d4a72c);
}

.content-page a img {
    border: none;
    text-decoration: none;
    transition: none;
}

.content-page a:hover img {
    transform: none;
    box-shadow: none;
}

/* Remove underline from image links */
.content-page a:has(img) {
    text-decoration: none;
}

/* ===== DEPRECATED ELEMENT FALLBACKS ===== */

/* <center> → centered text */
.content-page center {
    text-align: center;
    display: block;
    margin-bottom: 0.25rem;
}

/* Prevent double margin when <center> wraps a heading */
.content-page center h1,
.content-page center h2,
.content-page center h3 {
    margin-bottom: 0;
}
.content-page center:has(h1),
.content-page center:has(h2) {
    margin-bottom: 0;
}

/* <big> → slightly larger text */
.content-page big {
    font-size: 1.15em;
    font-weight: 600;
    font-family: var(--font-display, Georgia, serif);
    color: var(--hp-black, #0a0a0a);
}

/* <font> → inherit styles but respect color/size attributes */
.content-page font {
    font-family: inherit;
}

/* <u> → standard underline */
.content-page u {
    text-decoration: underline;
    text-decoration-color: auto;
    text-underline-offset: auto;
}

/* <small> styling */
.content-page small {
    font-size: 0.875em;
    color: inherit;
}

/* <em> within content */
.content-page em {
    font-style: italic;
    color: inherit;
}

/* ===== IMAGE CAPTIONS IN LAYOUT TABLES ===== */
/* Pattern: table[align] with an image in first row, caption <small> in second row */
.content-page table[align="right"] small,
.content-page table[align="left"] small {
    display: block;
    font-size: 0.8125rem;
    line-height: 1.5;
    color: var(--color-text-secondary, #57534e);
    padding-top: 0.25rem;
    border-top: none;
    margin-top: 0;
}

/* ===== PRODUCT GALLERY TABLES ===== */
/* Full-width tables need explicit 100% to override auto default */
.content-page table[width="100%"] {
    width: 100%;
}

.content-page table[width="100%"] img {
    max-width: 100%;
    height: auto;
}

/* ===== BLOCKQUOTES ===== */
.content-page blockquote {
    border-left: 3px solid #ccc;
    padding: 0.5rem 1rem;
    margin: 1rem 0;
    background: transparent;
    border-radius: 0;
    font-style: italic;
    color: var(--hp-text-light, #4a4a4a);
}

/* ===== HORIZONTAL RULES ===== */
.content-page hr {
    border: none;
    height: 2px;
    background: var(--hp-gray, #e5e4e1);
    margin: 2rem 0;
}

/* ===== BREADCRUMBS ===== */
/* Breadcrumb nav sits outside .content-page so it inherits
   the base breadcrumb styles from main.css / country.css
   without any content-page link or padding overrides. */

/* ===== LEGACY <br> SPACING ===== */
/* Consecutive <br> tags are used for paragraph spacing in legacy HTML.
   Collapse the extra ones so they don't balloon with the larger line-height. */
.content-page br + br {
    display: block;
    content: '';
    margin: 0;
    line-height: 0;
    font-size: 0;
    height: 0.375rem;
}

/* ===== CLEAR FLOATS ===== */
.content-page .clearfix::after,
.content-page::after {
    content: '';
    display: table;
    clear: both;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .intro-section .container.content-page {
        max-width: 100%;
    }

    .content-page {
        padding-top: 1.5rem;
        padding-bottom: 2rem;
    }

    .content-page img[align="right"],
    .content-page img[align="left"] {
        float: none;
        display: block;
        margin: 1rem auto;
        max-width: 100%;
    }

    .content-page table[align="right"],
    .content-page table[align="left"] {
        float: none;
        margin: 1rem 0;
        width: 100%;
        max-width: 100%;
    }

    .content-page table {
        font-size: 0.875rem;
    }

    .content-page table[border="1"] td,
    .content-page table[border="1"] th {
        padding: 0.5rem;
    }

    .content-page table[border="1"] td:first-child {
        white-space: normal;
    }

    .content-page h2 {
        margin-top: 2rem;
    }

    /* Product gallery — stack images on mobile */
    .content-page table[width="100%"] td {
        display: block;
        width: 100% !important;
        text-align: center;
    }

    .content-page table[width="100%"] td img {
        max-width: 100%;
        width: auto;
    }

    /* Image caption tables stack nicely */
    .content-page table[align="right"] small,
    .content-page table[align="left"] small {
        text-align: center;
    }
}

/* ===== TABLE OVERFLOW FOR MOBILE ===== */
@media (max-width: 640px) {
    .content-page table[border="1"],
    .content-page table.bordered {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}

/* ===== PRINT ===== */
@media print {
    .intro-section .container.content-page {
        max-width: 100%;
    }

    .content-page a {
        text-decoration: none;
        color: var(--hp-black, #0a0a0a);
    }

    .content-page a::after {
        content: ' (' attr(href) ')';
        font-size: 0.8em;
        color: var(--hp-gray-dark, #5a5a5a);
    }

    .content-page a:has(img)::after {
        content: none;
    }
}

/* ===== STAMP DESCRIPTION PAGE STYLES ===== */

/* --- Navigation Bar (prev / back to index / next) --- */
.content-page table.stamp-nav {
    border-collapse: separate;
    border-spacing: 0.5rem 0;
    width: 100%;
    border: none;
    margin: 0.5rem 0 1rem;
    padding: 0.5rem 0;
    border-top: 1px solid var(--color-gray-200, #e7e5e4);
    border-bottom: 1px solid var(--color-gray-200, #e7e5e4);
}

.content-page table.stamp-nav tr {
    background: none !important;
}

.content-page table.stamp-nav td {
    padding: 0;
    border: none !important;
    background: none !important;
    white-space: nowrap;
    width: 33.33%;
}

.content-page table.stamp-nav a {
    font-family: var(--font-family-base);
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    text-decoration: none;
    color: var(--color-gray-700, #44403c);
    padding: 0.4rem 1rem;
    border: 1px solid var(--color-gray-300, #d6d3d1);
    border-radius: 0.25rem;
    transition: all 0.2s ease;
    display: inline-block;
    background: var(--color-white, #fff);
}

.content-page table.stamp-nav a:hover {
    color: var(--color-primary, #000);
    border-color: var(--color-primary, #000);
    background: var(--color-accent, #f4c542);
    text-decoration: none;
}

/* Center column: "back to index" */
.content-page table.stamp-nav td:nth-child(2) a {
    font-weight: 600;
}

/* --- Stamp Details Card --- */
.content-page table.stamp-details-card {
    border-collapse: separate;
    border-spacing: 2px;
    width: 50%;
    float: right;
    margin: 0 0 0.75rem 1rem;
    border: 1px solid #999;
    border-radius: 0;
    overflow: visible;
    box-shadow: none;
    background: var(--color-white, #fff);
}

.content-page table.stamp-details-card tr {
    background: transparent;
}

.content-page table.stamp-details-card tr:nth-child(even) {
    background: transparent;
}

.content-page table.stamp-details-card tr:hover {
    background: transparent;
}

.content-page table.stamp-details-card td {
    padding: 3px 4px;
    border: 1px solid #bbb;
    vertical-align: top;
    font-size: 0.8125rem;
    line-height: 1.35;
    color: var(--color-text-primary, #1c1917);
}

.content-page table.stamp-details-card tr:last-child td {
    border-bottom: 1px solid #bbb;
}

.content-page table.stamp-details-card td:first-child {
    font-weight: 500;
    color: var(--color-text-primary, #1c1917);
    background: transparent;
    white-space: nowrap;
    width: auto;
    border-right: 1px solid #bbb;
}

.content-page table.stamp-details-card small {
    font-size: 1em;
    color: inherit;
    /* Reset caption styles from table[align="right"] small */
    display: inline;
    border-top: none;
    padding-top: 0;
    margin-top: 0;
}

.content-page table.stamp-details-card td:first-child small {
    font-weight: 500;
}

/* The main stamp set image (in <center> beside the floated details card)
   fills the available space left by the 55% table.
   Remove center's default margin so image top-aligns with table. */
.content-page table.stamp-details-card ~ center {
    text-align: left;
    margin-bottom: 0;
}

.content-page table.stamp-details-card ~ center img {
    width: calc(50% - 2rem);
    height: auto;
    max-width: calc(50% - 2rem);
}

/* --- Stamp Hero: image + details card side by side, equal height --- */
.content-page .stamp-hero {
    display: flex;
    gap: 1rem;
    margin-bottom: 0.75rem;
}

.content-page .stamp-hero > a {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.content-page .stamp-hero > a > img {
    display: block;
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
}

.content-page .stamp-hero > .stamp-details-card {
    float: none !important;
    width: 50%;
    flex-shrink: 0;
    margin: 0 !important;
}

/* --- Right-Floated Image/Caption Tables --- */
/* Ensure inline width attributes are respected alongside float */
.content-page table[align="right"][width] {
    float: right;
    max-width: 45%;
}

/* --- Products & Philatelic Items Gallery --- */
.content-page table.products-gallery {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    margin: 1rem 0 1.5rem;
    border: none;
}

.content-page table.products-gallery tr {
    background: none !important;
}

.content-page table.products-gallery td {
    vertical-align: bottom !important;
    text-align: center;
    padding: 2px;
    border: none !important;
    background: none !important;
}

/* Image cells: black background, bottom-aligned content.
   Horizontal padding + content-box clipping creates visible gap
   between columns while keeping border-collapse:collapse for
   zero vertical gap. */
.content-page table.products-gallery td:has(a > img) {
    background: #000 !important;
    background-clip: content-box !important;
    padding: 0 0.5rem !important;
    border-radius: 0.5rem;
}

.content-page table.products-gallery td[colspan] {
    padding-top: 1rem;
    padding-bottom: 0.5rem;
    vertical-align: middle !important;
}

/* The <a> wrapping the image must stay inline-level so
   vertical-align: bottom on the td can push it down */
.content-page table.products-gallery a:has(img) {
    display: inline;
    line-height: 0;
    border-radius: 0;
    overflow: hidden;
    transition: none;
}

.content-page table.products-gallery a:has(img):hover {
    box-shadow: none;
    transform: none;
}

/* Images: inline-block + vertical-align:bottom removes the
   descender gap while allowing td vertical-align to work */
.content-page table.products-gallery img {
    border-radius: 0;
    max-width: 100%;
    height: auto;
    display: inline-block;
    vertical-align: bottom;
}

/* Caption text — tight to the image above */
.content-page table.products-gallery small {
    display: block;
    margin-top: 2px;
}

/* Google Ads: pull completely out of flow so they never stretch rows */
.content-page table.products-gallery ins,
.content-page table.products-gallery .adsbygoogle,
.content-page table.products-gallery amp-ad,
.content-page table.products-gallery ins[style] {
    display: none !important;
    position: absolute !important;
    height: 0 !important;
    width: 0 !important;
    max-height: 0 !important;
    overflow: hidden !important;
    visibility: hidden !important;
}

/* Collapse the ads column (3rd td) entirely */
.content-page table.products-gallery td:nth-child(3) {
    width: 0 !important;
    max-width: 0 !important;
    padding: 0 !important;
    font-size: 0;
    line-height: 0;
    overflow: hidden;
    background: none !important;
}

/* --- References & Acknowledgements Sections --- */

/* References heading */
.content-page a[name="ref"] + h3 {
    font-size: 1.125rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-primary, #000);
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
    padding-bottom: 0.375rem;
    border-bottom: 2px solid var(--color-accent, #f4c542);
    display: inline-block;
}

/* Acknowledgements heading — same style as References */
.content-page a[name="ack"] + h3 {
    font-size: 1.125rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-primary, #000);
    margin-top: 2.5rem;
    margin-bottom: 0.75rem;
    padding-bottom: 0.375rem;
    border-bottom: 2px solid var(--color-accent, #f4c542);
    display: block;
    width: fit-content;
}

/* --- Inline Image with Caption (figure wrapping image + figcaption) --- */
.content-page figure.inline-image-caption {
    display: table;
    margin: 1rem auto;
    padding: 0;
}

.content-page figure.inline-image-caption img[align="center"] {
    margin: 0;
}

.content-page figure.inline-image-caption figcaption {
    display: table-caption;
    caption-side: bottom;
    margin-top: 0.375rem;
    font-size: 0.8125rem;
    line-height: 1.5;
    color: var(--color-text-secondary, #57534e);
}

/* --- Inline Quotes --- */
.content-page q {
    display: block;
    border-left: 3px solid #ccc;
    padding: 0.75rem 1rem;
    margin: 0.75rem 0;
    background: transparent;
    border-radius: 0;
    line-height: 1.65;
    quotes: none;
}

/* --- Notes Aside --- */
.content-page .notes {
    background: transparent;
    border-left: 3px solid #ccc;
    padding: 0.5rem 1rem;
    border-radius: 0;
    margin: 0.75rem 0;
}

/* --- Responsive iframe --- */
.content-page iframe {
    max-width: 100%;
    border-radius: 0;
    box-shadow: none;
}

/* --- Stamp Page Responsive --- */
@media (max-width: 768px) {
    .content-page .stamp-hero {
        flex-direction: column;
    }

    .content-page .stamp-hero > .stamp-details-card {
        width: 100% !important;
    }

    .content-page table.stamp-details-card {
        float: none;
        width: 100%;
        margin: 0 0 1.5rem;
    }

    .content-page table.stamp-details-card td:first-child {
        white-space: normal;
    }

    .content-page table.products-gallery {
        border-spacing: 0.375rem;
    }

    .content-page table.products-gallery td {
        display: block;
        width: 100% !important;
    }

    .content-page table.stamp-nav a {
        font-size: 0.75rem;
        padding: 0;
    }
}
